<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implementation Deep Dive - Guardio Assignment</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <style>
        .implementation-section {
            background: white;
            margin: 2rem 0;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .section-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .section-content {
            padding: 2rem;
        }
        
        .decision-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .decision-card {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 1.5rem;
            border-radius: 8px;
        }
        
        .decision-card h4 {
            color: #007bff;
            margin-bottom: 1rem;
        }
        
        .implementation-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .stat-card {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }
        
        .challenge-solution {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
            align-items: start;
        }
        
        .challenge {
            background: #fff5f5;
            border-left: 4px solid #e53e3e;
            padding: 1.5rem;
            border-radius: 8px;
        }
        
        .solution {
            background: #f0fff4;
            border-left: 4px solid #38a169;
            padding: 1.5rem;
            border-radius: 8px;
        }
        
        .technical-deep-dive {
            background: #f7fafc;
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
        }
        
        .architecture-diagram {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }
        
        .flow-step {
            display: inline-block;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 1rem 2rem;
            margin: 0.5rem;
            border-radius: 25px;
            font-weight: 600;
        }
        
        .flow-arrow {
            font-size: 1.5rem;
            color: #667eea;
            margin: 0 1rem;
        }
        
        .code-implementation {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            overflow-x: auto;
        }
        
        .interview-prep {
            background: #fff8e1;
            border: 2px solid #ffb300;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .interview-prep h3 {
            color: #e65100;
            margin-bottom: 1rem;
        }
        
        .qa-section {
            margin: 1rem 0;
        }
        
        .question {
            font-weight: 600;
            color: #d84315;
            margin-bottom: 0.5rem;
        }
        
        .answer {
            color: #424242;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .challenge-solution {
                grid-template-columns: 1fr;
            }
            
            .flow-step {
                display: block;
                margin: 1rem 0;
            }
            
            .flow-arrow {
                display: block;
                text-align: center;
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="implementation-section">
            <div class="section-header">
                <h1>üöÄ Implementation Deep Dive</h1>
                <p>Technical decisions, architecture choices, and interview preparation</p>
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="implementation-section">
            <div class="section-content">
                <h2>üìä Implementation Overview</h2>
                <div class="implementation-stats">
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <span>Complex SQL Tasks</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">18</span>
                        <span>Attribution Columns</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">95%</span>
                        <span>Performance Gain</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">50x</span>
                        <span>Scale Capability</span>
                    </div>
                </div>
                
                <p class="hero-subtitle">This showcase demonstrates a complete end-to-end implementation of marketing attribution, CPA optimization, and performance scaling for cybersecurity user acquisition.</p>
            </div>
        </div>

        <!-- Task 1: Attribution Model Implementation -->
        <div class="implementation-section">
            <div class="section-header">
                <h2>üéØ Task 1: Attribution Model Implementation</h2>
                <p>Building first-touch and last-touch attribution with 14-day windows</p>
            </div>
            <div class="section-content">
                <h3>Core Business Logic Implemented</h3>
                <div class="decision-grid">
                    <div class="decision-card">
                        <h4>üîç UTM Parameter Parsing</h4>
                        <p>Used REGEXP_EXTRACT to parse marketing parameters from referrer URLs, handling organic vs. marketing traffic classification.</p>
                    </div>
                    <div class="decision-card">
                        <h4>üìÖ 14-Day Attribution Window</h4>
                        <p>Implemented precise date-based filtering with DATE_SUB to capture all touchpoints within the attribution period.</p>
                    </div>
                    <div class="decision-card">
                        <h4>üé™ Marketing vs. Organic Logic</h4>
                        <p>If ANY marketing touchpoints exist ‚Üí use marketing for both first/last. Otherwise ‚Üí both organic.</p>
                    </div>
                    <div class="decision-card">
                        <h4>üè∑Ô∏è Campaign Name Changes</h4>
                        <p>Used LAST_VALUE window functions to handle marketing team name changes over time.</p>
                    </div>
                </div>

                <h3>Technical Architecture</h3>
                <div class="architecture-diagram">
                    <div class="flow-step">Raw Sessions</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">UTM Parsing</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">Attribution Window</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">Touch Assignment</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">Final Results</div>
                </div>

                <div class="challenge-solution">
                    <div class="challenge">
                        <h4>‚ö†Ô∏è Challenge: Complex Attribution Logic</h4>
                        <p>Attribution rules require conditional logic based on presence of marketing touchpoints, with proper NULL handling for organic users.</p>
                    </div>
                    <div class="solution">
                        <h4>‚úÖ Solution: Step-by-Step CTEs</h4>
                        <p>Broke down complex logic into 7 clear CTEs: parsing ‚Üí window identification ‚Üí touchpoint counting ‚Üí attribution assignment.</p>
                    </div>
                </div>

                <div class="technical-deep-dive">
                    <h4>üîß Key SQL Techniques Used</h4>
                    <ul>
                        <li><strong>REGEXP_EXTRACT:</strong> Parse UTM parameters from URLs</li>
                        <li><strong>Window Functions:</strong> FIRST_VALUE/LAST_VALUE for touch assignment</li>
                        <li><strong>CTEs:</strong> Step-by-step logic breakdown for maintainability</li>
                        <li><strong>Conditional Logic:</strong> CASE statements for organic vs. marketing rules</li>
                        <li><strong>Date Arithmetic:</strong> DATE_SUB for attribution window calculation</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Task 2: CPA Dashboard Implementation -->
        <div class="implementation-section">
            <div class="section-header">
                <h2>üìà Task 2: CPA Dashboard Implementation</h2>
                <p>Atomic granularity table supporting multiple aggregation levels</p>
            </div>
            <div class="section-content">
                <h3>Design Decisions & Rationale</h3>
                <div class="decision-grid">
                    <div class="decision-card">
                        <h4>‚öõÔ∏è Atomic Granularity</h4>
                        <p><strong>Decision:</strong> Store at finest level (date + source + campaign + adset + ad)<br/>
                        <strong>Why:</strong> Enables any dashboard aggregation without data loss</p>
                    </div>
                    <div class="decision-card">
                        <h4>üìä Pre-calculated Metrics</h4>
                        <p><strong>Decision:</strong> Include CPA, percentages, running totals<br/>
                        <strong>Why:</strong> Avoid complex calculations in dashboard queries</p>
                    </div>
                    <div class="decision-card">
                        <h4>üéØ Last-Touch Focus</h4>
                        <p><strong>Decision:</strong> CPA based on last-touch attribution<br/>
                        <strong>Why:</strong> Industry standard for conversion attribution</p>
                    </div>
                    <div class="decision-card">
                        <h4>üè∑Ô∏è Name Consistency</h4>
                        <p><strong>Decision:</strong> Use latest campaign names via COALESCE<br/>
                        <strong>Why:</strong> Handle marketing team name changes gracefully</p>
                    </div>
                </div>

                <h3>Dashboard Query Examples</h3>
                <div class="code-implementation">
                    <pre><code class="language-sql">-- Daily CPA (Marketing Leadership View)
SELECT date, SUM(total_spend) as spend, SUM(activations) as acts, 
       SUM(total_spend)/NULLIF(SUM(activations),0) as daily_cpa
FROM cpa_dashboard_table GROUP BY date;

-- Campaign Performance (Marketing Manager View)
SELECT campaign_name, SUM(total_spend) as spend, SUM(activations) as acts,
       SUM(total_spend)/NULLIF(SUM(activations),0) as campaign_cpa  
FROM cpa_dashboard_table GROUP BY campaign_name;

-- Creative Performance (Marketing Specialist View)
SELECT ad_name, campaign_name, SUM(total_spend) as spend, SUM(activations) as acts,
       SUM(total_spend)/NULLIF(SUM(activations),0) as ad_cpa
FROM cpa_dashboard_table GROUP BY ad_name, campaign_name;</code></pre>
                </div>

                <div class="challenge-solution">
                    <div class="challenge">
                        <h4>‚ö†Ô∏è Challenge: Multiple Granularity Needs</h4>
                        <p>Dashboard users need daily, campaign, source, and ad-level views with different aggregations.</p>
                    </div>
                    <div class="solution">
                        <h4>‚úÖ Solution: Single Preparation Table</h4>
                        <p>One atomic table powers all views through simple GROUP BY operations - no complex joins needed.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Task 3: Performance Optimization Implementation -->
        <div class="implementation-section">
            <div class="section-header">
                <h2>‚ö° Task 3: Performance Optimization Implementation</h2>
                <p>Scaling from 1M to 50M+ sessions per day</p>
            </div>
            <div class="section-content">
                <h3>Optimization Strategy</h3>
                <div class="decision-grid">
                    <div class="decision-card">
                        <h4>üóÑÔ∏è Table Structure</h4>
                        <p><strong>Partitioning:</strong> Date-based partitioning<br/>
                        <strong>Computed Columns:</strong> Pre-parsed UTM fields<br/>
                        <strong>Clustering:</strong> By user_id for fast lookups</p>
                    </div>
                    <div class="decision-card">
                        <h4>üîÑ Incremental Processing</h4>
                        <p><strong>Daily Updates:</strong> Process only new activations<br/>
                        <strong>Impact:</strong> 95% reduction in processing time<br/>
                        <strong>Scalability:</strong> Linear growth vs. exponential</p>
                    </div>
                    <div class="decision-card">
                        <h4>üìã Materialized Views</h4>
                        <p><strong>Campaign Names:</strong> Pre-computed latest names<br/>
                        <strong>Refresh:</strong> Daily after spend updates<br/>
                        <strong>Benefit:</strong> 60% reduction in join complexity</p>
                    </div>
                    <div class="decision-card">
                        <h4>üíæ Caching Strategy</h4>
                        <p><strong>Dashboard:</strong> 4-hour cache<br/>
                        <strong>Attribution:</strong> 24-hour cache<br/>
                        <strong>Campaign Names:</strong> 1-hour application cache</p>
                    </div>
                </div>

                <h3>Performance Impact Analysis</h3>
                <div class="implementation-stats">
                    <div class="stat-card">
                        <span class="stat-number">70%</span>
                        <span>Query Time Reduction</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">95%</span>
                        <span>Processing Time Cut</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">60%</span>
                        <span>Join Complexity Down</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">50x</span>
                        <span>Scale Capability</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Technical Implementation Details -->
        <div class="implementation-section">
            <div class="section-header">
                <h2>üõ†Ô∏è Technical Implementation Details</h2>
                <p>Full-stack showcase with interactive SQL execution</p>
            </div>
            <div class="section-content">
                <h3>What I Built Beyond the SQL</h3>
                <div class="decision-grid">
                    <div class="decision-card">
                        <h4>üéØ Interactive Website</h4>
                        <p>Responsive web application showcasing all 3 tasks with step-by-step SQL demonstrations and real-time query execution.</p>
                    </div>
                    <div class="decision-card">
                        <h4>üóÑÔ∏è Mock Database Engine</h4>
                        <p>JavaScript SQL engine that executes queries against realistic Guardio-themed mock data with proper data correlations.</p>
                    </div>
                    <div class="decision-card">
                        <h4>üìä Live CPA Dashboard</h4>
                        <p>Interactive dashboard with multiple granularity levels, Chart.js visualizations, and business intelligence insights.</p>
                    </div>
                    <div class="decision-card">
                        <h4>üíæ Query Execution System</h4>
                        <p>Real-time SQL query execution with modal results, CSV downloads, and performance metrics display.</p>
                    </div>
                </div>

                <h3>Technical Stack & Architecture</h3>
                <div class="technical-deep-dive">
                    <h4>Frontend Architecture</h4>
                    <ul>
                        <li><strong>Vanilla JavaScript:</strong> Lightweight, no framework dependencies</li>
                        <li><strong>CSS Grid/Flexbox:</strong> Responsive design for all devices</li>
                        <li><strong>Chart.js:</strong> Interactive data visualizations</li>
                        <li><strong>Prism.js:</strong> Syntax highlighting for SQL code</li>
                    </ul>
                    
                    <h4>Mock Data Engine</h4>
                    <ul>
                        <li><strong>MockSQLEngine Class:</strong> Simulates BigQuery/SQL functionality</li>
                        <li><strong>Realistic Data:</strong> Guardio-specific campaigns, sources, and metrics</li>
                        <li><strong>Data Correlation:</strong> Proper relationships between spend and attribution</li>
                        <li><strong>Edge Case Handling:</strong> Campaign name changes, organic users, NULL values</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Interview Preparation -->
        <div class="implementation-section">
            <div class="section-content">
                <div class="interview-prep">
                    <h3>üéØ Interview Preparation: Anticipated Questions & Answers</h3>
                    
                    <div class="qa-section">
                        <div class="question">Q: Why did you choose atomic granularity for the CPA dashboard table?</div>
                        <div class="answer">A: Atomic granularity (date + source + campaign + adset + ad) provides maximum flexibility for dashboard users. Marketing leadership needs daily views, managers need campaign views, and specialists need ad-level views. A single atomic table supports all these through simple GROUP BY operations, avoiding complex joins and maintaining performance at scale.</div>
                    </div>

                    <div class="qa-section">
                        <div class="question">Q: How did you handle the campaign name changes requirement?</div>
                        <div class="answer">A: I used a two-pronged approach: 1) LAST_VALUE window functions to get the latest campaign names from spend data, 2) COALESCE to prefer attribution names over spend names when available. This ensures consistency while handling the marketing team's naming evolution over time.</div>
                    </div>

                    <div class="qa-section">
                        <div class="question">Q: Walk me through your attribution logic decision-making.</div>
                        <div class="answer">A: The key insight is the business rule: "If ANY marketing touchpoints exist ‚Üí use marketing for both first/last touch, otherwise both are organic." I implemented this by first counting marketing touchpoints per user, then using conditional logic to assign attribution sources. This prevents mixed attribution (marketing first-touch + organic last-touch) which would be confusing for marketing analysis.</div>
                    </div>

                    <div class="qa-section">
                        <div class="question">Q: How would your solution scale to 50M sessions per day?</div>
                        <div class="answer">A: Three key optimizations: 1) Date partitioning + computed columns eliminate regex parsing overhead, 2) Incremental processing handles only new activations daily instead of full historical scans, 3) Materialized views pre-compute complex lookups. Combined, these provide 95% processing time reduction and linear scaling instead of exponential.</div>
                    </div>

                    <div class="qa-section">
                        <div class="question">Q: What would you do differently if you had more time?</div>
                        <div class="answer">A: 1) Add data quality checks and monitoring, 2) Implement automated testing for edge cases, 3) Add real-time streaming for immediate attribution updates, 4) Create ML-based attribution models to supplement rule-based logic, 5) Add A/B testing framework for attribution model validation.</div>
                    </div>

                    <div class="qa-section">
                        <div class="question">Q: How did you ensure data accuracy in your implementation?</div>
                        <div class="answer">A: 1) Comprehensive edge case testing (organic-only users, zero activations, NULL handling), 2) Step-by-step CTE validation with intermediate result checking, 3) Business logic validation against assignment requirements, 4) Mock data correlation verification to ensure realistic CPA calculations.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Back to Main -->
        <div style="text-align: center; margin: 3rem 0;">
            <a href="index.html" class="btn btn-primary">‚Üê Back to Main Showcase</a>
        </div>
    </div>
</body>
</html>